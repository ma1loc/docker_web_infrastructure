>>> Docker Commands <<<
	sudo docker images		// show images info
	sudo docker build "Dockerfile"		// dockerfile blueprint of an image, command create imgae from Dockerfile
	sudo docker image pull "image name"
	sudo docker exec -> execute the container to intract with it
	sudo docker stop	->	stop container from runing
	docker system prune	-> clean up
	>>> some times we need to delete first the container then the image
	// delete a container:
	sudo docker ps -a		// will shows all info about container you have and it's ID
	sudo docker rm 7e492d1fac27		// delete container
	sudo docker rmi f7931603f70e	// delete an imgae
	sudo docker build -t 'Image identifier' 'path of dockerfile'
		-t	->	tag the image with a name
	sudo run -d -> -d (foreground mode)
		Container keeps running even if you close the terminal.
	sudo docker run --rm -d -p 8080:80 --name nginx_cont nginx_image
		TODO: port mapping to learn about it
		sleep 100 -> is a foreground process
		sleep 100 & -> is a background process
		--rm -> once the container is stop will rm
		-it	-> interactive input && TTY
	sudo docker compose -f docker-compose.yml logs mariadb
		// see the log of the container



>>> Docker networking
		sudo docker network create "net_name"
	// then connect/Disconnect a container to our network like this:
		sudo docker network connect "net_name" "container name"
		sudo docker network Disconnect "net_name" "container name"
	// you can inspect the network "net_name" like this:
		sudo docker inspect "net_name"
	// other way to add container to network
		sudo docker run --network "net_name"
	


>>> Docker Volumes


	# tmpfs ?
	// docker stored the docker Volumes in -> /var/lib/docker/volumes
	sudo docker volume create "volume_name"
	sudo docker volume inspect my_volume
	sudo docker volume rm "volume_name"
	sudo docker volume prune	-> delete all local Volumes
	


>>> about mariadb Dockerfile <<<
	# this command will executed intel the container is start
	# when it's start will execute the commands 'CMD'
	# mariadbd -> mariadb deamon
	# Run the MariaDB process as the "mysql" system user
	CMD ["mariadbd", "--user=mysql"]
	Run is working (Building docker image)



>>> about layer caching in docker
	// every line in the dockerfile is a layer 
	// if the run this image again and every dockerfile layer is not 
		changed will just execute the layer caching, if yes will rebuilt
		and what every after that line that will rebuilt is not change will
		rebuilt too
	// each instruction creates layer to help you trubleshoting 
 


# instuctions
	# ARG	-> define key=value
    # FROM
    # COPY
    # RUN	-> executed we image is build
    # EXPOSE
    # CMD	-> executed we container is start



# sudo apt install / apt-transport-https / ca-certifecates / curl / softwrea-properate-common

# ping installtion
apt install iputils-ping

# get the pid of the last command
	echo $!
# get the exit status
	echo $?
# get the last command
	echo !!

# Enter your MYSQL_ROOT_PASSWORD, then:
SHOW DATABASES;
USE wordpress;
SELECT User, Host FROM mysql.user;


services:
  mariadb:
    build:
      context: ./requirements/mariadb/
    environment:
      - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
      - WORDPRESS_DB_NAME=${WORDPRESS_DB_NAME}
      - WORDPRESS_USER=${WORDPRESS_USER}
      - WORDPRESS_PASSWORD=${WORDPRESS_PASSWORD}
    volumes:
      - mariadb-data:/var/lib/mysql
    networks:
      - br_net
    restart: unless-stopped

  wordpress:
    build:
      context: ./requirements/wordpress/
    depends_on:
      - mariadb
    environment:
      - WORDPRESS_DB_HOST=mariadb
      - WORDPRESS_DB_NAME=${WORDPRESS_DB_NAME}
      - WORDPRESS_DB_USER=${WORDPRESS_USER}
      - WORDPRESS_DB_PASSWORD=${WORDPRESS_PASSWORD}
    volumes:
      - wordpress-data:/var/www/html/wordpress
    networks:
      - br_net
    restart: unless-stopped

  nginx:
    build:
      context: ./requirements/nginx/
    depends_on:
      - wordpress
    ports:
      - "443:443"
    volumes:
      - wordpress-data:/var/www/html/wordpress
    networks:
      - br_net
    restart: unless-stopped

volumes:
  mariadb-data:
    driver: local
  wordpress-data:
    driver: local

networks:
  br_net:
    driver: bridge




# <<< extension >>>

# php-curl
#   curl http request, fetch something over HTTP or HTTPS.
#   for example install a plugin 
#   wordpress fetch that plogin using HTTP request

# php-gd
#   is a graphical library
#   that allow wordpress to create, manipulate, and resize images

# php-mbstring
#   mbstring stands for “multibyte string”.
#   allows WordPress to correctly handle Unicode and multibyte character encodings 
#   (like UTF-8, Japanese, Arabic, emojis, etc.).

# php-xml -> allows WordPress to parse and handle XML documents.

# php-xmlrpc -> not use it 

# php-soap -> not use it

# php-intl -> not use it 

# php-zip 
# example installing plugins using "php-curl"
# the plugin it comes ziped we need php-zip to install it

# && apt install -y mariadb-client \
# RUN apt update -y && apt upgrade -y \
# 	&& apt install -y \
# 	curl \
# 	php-fpm \
# 	php-mysql \
# 	php-curl \
# 	php-gd \
# 	php-mbstring \
# 	php-xml \
# 	php-zip \
# 	unzip

# RUN apt update -y && apt upgrade -y \
# 	&& apt install -y curl unzip php8.3-fpm php8.3-mysql \
# 	php8.3-curl php8.3-gd php8.3-mbstring php8.3-xml \
# 	php8.3-zip

# Q&A
about the -v delete the volume too
why www-data in the wordpress and the nginx both
wordpress -> /etc/php/8.4/fpm/pool.d/www.conf
nginx -> /etc/nginx/nginx.conf

// wordpress resuorce for instaltion
https://developer.wordpress.org/advanced-administration/before-install/
https://wp-cli.org/
https://www.cloudways.com/blog/wordpress-wp-config/
https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-debian-11
https://www.youtube.com/watch?v=VH4gXcvkmOY
https://www.digitalocean.com/community/tutorials/how-to-create-a-self-signed-ssl-certificate-for-nginx-in-ubuntu
https://nginx.org/en/docs/http/ngx_http_ssl_module.html	
